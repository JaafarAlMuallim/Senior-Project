generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["reactNative"]
}

datasource db {
    provider = "sqlite"
    url      = "file:./app.db"
}

model User {
    id           String         @id @default(cuid())
    email        String         @unique
    name         String
    clerkId      String         @unique @default(cuid())
    password     String?
    createdAt    DateTime       @default(now())
    updatedAt    DateTime       @updatedAt
    profileId    String?
    groupId      String?
    Profile      Profile?
    Registration Registration[]
}

model Profile {
    id         String   @id @default(cuid())
    userId     String   @unique
    major      String?
    phone      String?
    university String?
    standing   String?
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt
    user       User     @relation(fields: [userId], references: [clerkId])
}

model Registration {
    id        String   @id @default(cuid())
    sectionId String
    userId    String
    semester  String   @default("241")
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    section   Section  @relation(fields: [sectionId], references: [id])
    user      User     @relation(fields: [userId], references: [id])
}

model Section {
    id           String         @id @default(cuid())
    title        String
    courseId     String
    startTime    DateTime
    endTime      DateTime
    createdAt    DateTime       @default(now())
    updatedAt    DateTime       @updatedAt
    recurrence   String?
    instructor   String?        @default("TBD")
    location     String?        @default("TBD")
    groupId      String?
    registration Registration[]
    course       Course         @relation(fields: [courseId], references: [id])
}

model Course {
    id        String    @id @default(cuid())
    name      String
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    code      String
    Section   Section[]
    groupId   String?
}
